<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Painel Admin — FatecWeek</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:Segoe UI,Roboto,Arial;margin:0;padding:0;background:#f5f6fb;color:#222}
    header{background:#273c75;color:#fff;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
    main{padding:20px}
    .btn{background:#0984e3;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
    .danger{background:#e74c3c}
    .card{background:#fff;padding:12px;border-radius:6px;box-shadow:0 1px 4px rgba(0,0,0,.06);margin-bottom:12px}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
    label{display:block;margin-top:8px;font-size:0.9rem}
    input,textarea,select{width:100%;padding:8px;margin-top:4px;border:1px solid #ddd;border-radius:4px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
    .small{font-size:0.9rem;color:#666}
    .actions button{margin-right:6px}
    .hidden{display:none}
    /* Modal de Palestra: layout em coluna quando visível */
    #palestraModal{display:flex;flex-direction:column}
    #palestraModal.hidden{display:none !important}
  </style>
</head>
<body>
  <header>
    <div>
      <strong>Painel Administrador</strong>
      <span id="userName" class="small" style="margin-left:12px"></span>
    </div>
    <div>
      <button id="btnLogout" class="btn">Sair</button>
    </div>
  </header>

  <!-- Modal para criar/editar palestra -->
  <div id="palestraModal" class="card hidden" style="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(92vw,560px);max-height:90vh;z-index:60;overflow:hidden">
    <h3 id="modalTitle">Nova Palestra</h3>
    <div id="palestraModalBody" style="flex:1 1 auto;overflow:auto;padding-right:6px">
      <label>Título</label>
      <input id="m_titulo" />
      <label>Palestrante</label>
      <input id="m_palestrante" />
      <label>Duração (minutos)</label>
      <input id="m_duracao" type="number" placeholder="60" />
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
        <div>
          <label>Data</label>
          <input id="m_data_br" type="date" />
        </div>
        <div>
          <label>Hora</label>
          <input id="m_hora" type="time" placeholder="19:00" />
        </div>
      </div>
      <label>Local</label>
      <input id="m_local" />
      <label>Vagas</label>
      <input id="m_vagas" type="number" />
      <label>Tipo</label>
      <select id="m_tipo">
        <option value="palestra">Palestra</option>
        <option value="exposicao">Exposição (Dia da Expo)</option>
      </select>
  <label>Pontos (definidos pelo admin)</label>
  <input id="m_pontos" type="number" placeholder="0" />
      <label>Descrição</label>
      <textarea id="m_descricao"></textarea>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px">
        <div>
          <label>Latitude</label>
          <input id="m_lat" type="number" step="0.000001" placeholder="-23.000000" />
        </div>
        <div>
          <label>Longitude</label>
          <input id="m_lng" type="number" step="0.000001" placeholder="-46.000000" />
        </div>
      </div>
      <label>Raio (metros)</label>
      <input id="m_raio" type="number" placeholder="50" />
    </div>
    <div style="margin-top:8px;text-align:right;position:sticky;bottom:0;background:#fff;padding-top:8px;border-top:1px solid #eee">
      <button id="m_cancel" class="btn danger">Cancelar</button>
      <button id="m_save" class="btn">Salvar</button>
    </div>
  </div>

  <!-- Modal para exibir/imprimir QR Code -->
  <div id="qrModal" class="card hidden" style="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:420px;z-index:70">
    <h3>QR Code para impressão</h3>
    <div id="qrContent" style="text-align:center;padding:8px">
      <img id="qrImage" alt="QR Code" style="max-width:100%;height:auto;border:1px solid #eee;padding:8px;background:#fff" />
      <div id="qrMeta" class="small" style="margin-top:8px"></div>
    </div>
    <div style="margin-top:8px;text-align:right">
      <button id="qrPrint" class="btn">Imprimir</button>
      <button id="qrDownload" class="btn">Baixar</button>
      <button id="qrClose" class="btn danger">Fechar</button>
    </div>
  </div>

  <main>
    <div class="grid">
      <section>
        <div class="card">
          <h3>Gerenciar Palestras</h3>
          <div id="palestrasList">Carregando palestras...</div>
        </div>

        <div class="card">
          <h3>Minhas Ações</h3>
          <button id="btnCreateNew" class="btn">Criar nova palestra</button>
          <div id="messages" class="small" style="margin-top:8px;color:#b03939"></div>
        </div>
        <div class="card">
          <h3>Inscrições</h3>
          <div id="inscricoesList">Carregando inscrições...</div>
        </div>
        <div class="card">
          <h3>Administradores</h3>
          <form id="adminForm" style="margin-bottom:12px">
            <label>Nome</label>
            <input id="adminNome" required />
            <label>Email</label>
            <input id="adminEmail" type="email" required />
            <label>Senha inicial</label>
            <input id="adminSenha" type="password" required />
            <div style="margin-top:8px;text-align:right">
              <button type="submit" class="btn">Criar administrador</button>
            </div>
          </form>
          <div id="adminList">Carregando administradores...</div>
        </div>
        <div class="card">
          <h3>Docentes</h3>
          <form id="docenteForm" style="margin-bottom:12px">
            <label>Nome</label>
            <input id="docenteNome" required />
            <label>Email</label>
            <input id="docenteEmail" type="email" required />
            <label>Fatec</label>
            <input id="docenteFatec" placeholder="Ex.: Fatec Osasco" required />
            <label>Cursos (separados por vírgula)</label>
            <input id="docenteCursos" placeholder="Ex.: ADS, DSM" />
            <div style="margin-top:8px;text-align:right">
              <button class="btn" type="submit">Adicionar Docente</button>
            </div>
          </form>
          <div id="docentesList">Carregando docentes...</div>
        </div>
      </section>

      <aside>
        <div class="card">
          <h4>Detalhes / Presenças</h4>
          <div id="palestraDetails" class="small">Selecione uma palestra para ver presenças.</div>
        </div>
        <div class="card">
          <h4>Estatísticas</h4>
          <div id="stats" class="small">—</div>
        </div>
        <div class="card">
          <h4>Creditar Voluntariado</h4>
          <form id="volForm" class="small">
            <label>RA do participante</label>
            <input id="volRa" placeholder="Ex.: 123456789" required />
            <label>Valor (0 a 1.0)</label>
            <input id="volValor" type="number" step="0.01" min="0" max="1" value="1" />
            <label>Motivo (opcional)</label>
            <input id="volMotivo" placeholder="Ex.: Apoio na feira" />
            <div style="margin-top:8px;text-align:right">
              <button type="submit" class="btn">Creditar</button>
            </div>
          </form>
          <div id="volMsg" class="small" style="margin-top:6px;color:#2d3436"></div>
        </div>
      </aside>
    </div>
  </main>

  <script src="/js/admin.js" defer></script>
</body>
</html>
